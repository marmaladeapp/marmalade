.grid-container.small-12.medium-10

  .grid-content.small-12

    - if @context.class.name == 'Group'
      %h3 #{@context.name.possessive} address books
      %a.button.bg-blueberry{:href => new_group_address_book_path(@context)} New address book
    - elsif @context
      %h3 #{@context.name.possessive} address books
      %a.button.bg-blueberry{:href => @context.class.name == "Household" ? new_user_home_address_book_path(current_user) : new_resource_address_book_path(@resource)} New address book
    - else
      %h3 Your address books

  .grid-block.wrap.small-12
    - @address_books.each do |address_book|
      .grid-content.small-12.medium-6.large-4
        - case address_book.owner.class.name
        - when "User", "Business"
          - canonical_link = resource_address_book_path(address_book.owner,address_book)
        - when "Household"
          - canonical_link = user_home_address_book_path(current_user,address_book)
        - when "Group"
          - canonical_link = group_address_book_path(address_book.owner,address_book)
        %a{:href => canonical_link}
          .card{:style => 'height:250px;'}
            .card-section.bg-ice-cream.burnt-toast
              %h4{:style => 'margin-top:0;margin-bottom:0;'}= truncate(address_book.name, length: 12)
            .card-divider.ice-cream.bg-burnt-toast
              = truncate(address_book.owner.name, length: 15)
            .card-section
              - if !address_book.description.blank?
                = address_book.description
              - else
                %em No description.
