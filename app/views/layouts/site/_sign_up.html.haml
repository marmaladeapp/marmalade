.tiny.reveal{'data-reveal' => true, :id => 'signUpForm'}
  %h3 Sign up
  = form_for(:user, url: registration_path(:user)) do |f|
    = f.hidden_field :currency, :value => 'USD'
    = f.hidden_field :time_zone, :value => 'UTC'
    = f.hidden_field :country, :value => 'US'
    = f.hidden_field :language, :value => request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}(?:-[a-zA-Z]{2})?/).first
    :javascript
      $(document).ready(function(){
        time_zone = jstz.determine().name();
        $("#user_time_zone").val(time_zone);
        $.getJSON("http://freegeoip.net/json/", function (data) {
          var country = data.country_code;
          $("#user_country").val(country);
          var currency = iso.countries[country].currency;
          $("#user_currency").val(currency);
        });
      });
    .field.text-left
      = f.label :username
      = f.text_field :username, autofocus: true
    .field.text-left
      = f.label :email
      = f.email_field :email
    .field.text-left
      = f.label :password
      - if @minimum_password_length
        %em
          (#{@minimum_password_length} characters minimum)
      = f.password_field :password, autocomplete: "off"
    .field.text-left
      = f.label :password_confirmation
      = f.password_field :password_confirmation, autocomplete: "off"
    %button.button.expanded.bg-strawberry-jam Sign up
    %p.text-left.help-text
      By clicking "Sign up", you agree to adhere to our <a href=#{terms_of_service_path}>Terms of Service</a>.
    .text-center
      %a{'data-open' => 'loginForm'} Login
      |
      %a{'data-open' => 'resendConfirmation'} Didn't receive confirmation instructions?
  %button.close-button{'data-close' => true, 'aria-label' => 'Close modal', :type => "button"}
    %span{'aria-hidden' => "true"} &times;

.tiny.reveal{'data-reveal' => true, :id => 'resendConfirmation'}
  %h3 Resend confirmation instructions
  = form_for(:user, url: confirmation_path(:user), html: { method: :post }) do |f|
    .field.text-left
      = f.label :email
      %br/
      = f.email_field :email, autofocus: true
    .actions
      = f.submit "Resend confirmation instructions", :class => 'button expanded bg-strawberry-jam'
  %button.close-button{'data-close' => true, 'aria-label' => 'Close modal', :type => "button"}
    %span{'aria-hidden' => "true"} &times;
